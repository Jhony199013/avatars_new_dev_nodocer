{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"\";\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"\";\n\n// Создаем клиент только если переменные окружения установлены\n// Во время сборки может не быть переменных окружения\nexport const supabase = supabaseUrl && supabaseAnonKey\n  ? createClient(supabaseUrl, supabaseAnonKey)\n  : createClient(\"https://placeholder.supabase.co\", \"placeholder-key\");\n\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM,cAAc,gEAAwC;AAC5D,MAAM,kBAAkB,iNAA6C;AAI9D,MAAM,WAAW,uCACpB,IAAA,0MAAY,EAAC,aAAa,mBAC1B"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/components/ui/LogoutModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"@/lib/supabaseClient\";\n\ninterface LogoutModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function LogoutModal({ isOpen, onClose }: LogoutModalProps) {\n  const router = useRouter();\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\n\n  const handleLogout = async () => {\n    setIsLoggingOut(true);\n    try {\n      await supabase.auth.signOut();\n      document.cookie =\n        \"app-auth=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\";\n      router.push(\"/\");\n      onClose();\n    } catch (error) {\n      console.error(\"Ошибка при выходе:\", error);\n    } finally {\n      setIsLoggingOut(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div className=\"mx-4 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl\">\n        <h2 className=\"mb-4 text-xl font-semibold text-gray-900\">Выход</h2>\n        <p className=\"mb-6 text-gray-600\">Вы действительно хотите выйти из аккаунта?</p>\n        <div className=\"flex gap-3\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            disabled={isLoggingOut}\n            className=\"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\n          >\n            Отмена\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleLogout}\n            disabled={isLoggingOut}\n            className=\"flex-1 rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-gray-800 disabled:opacity-50\"\n          >\n            {isLoggingOut ? \"Выходим...\" : \"Выйти\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAWO,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;;IAC/D,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,eAAe;QACnB,gBAAgB;QAChB,IAAI;YACF,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;YAC3B,SAAS,MAAM,GACb;YACF,OAAO,IAAI,CAAC;YACZ;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;QACtC,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAA2C;;;;;;8BACzD,6LAAC;oBAAE,WAAU;8BAAqB;;;;;;8BAClC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,eAAe,eAAe;;;;;;;;;;;;;;;;;;;;;;;AAM3C;GA/CgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/lib/prefetchAvatars.ts"],"sourcesContent":["import { supabase } from \"./supabaseClient\";\nimport type { PhotoAvatarRow } from \"@/app/avatars/servers/UploadAvatar\";\n\n// Кеш для prefetch данных\nlet prefetchCache: {\n  data: PhotoAvatarRow[] | null;\n  timestamp: number;\n  userId: string | null;\n} = {\n  data: null,\n  timestamp: 0,\n  userId: null,\n};\n\nconst CACHE_DURATION = 30000; // 30 секунд\n\nexport async function prefetchAvatarsData(): Promise<void> {\n  try {\n    // Проверяем кеш\n    const now = Date.now();\n    if (\n      prefetchCache.data &&\n      prefetchCache.userId &&\n      now - prefetchCache.timestamp < CACHE_DURATION\n    ) {\n      return; // Данные уже в кеше и свежие\n    }\n\n    // Получаем пользователя\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      return;\n    }\n\n    // Проверяем, не загружаем ли мы те же данные\n    if (prefetchCache.userId === user.id && now - prefetchCache.timestamp < CACHE_DURATION) {\n      return;\n    }\n\n    // Загружаем данные в фоне\n    const { data, error } = await supabase\n      .from(\"photo_avatars\")\n      .select(\"*\")\n      .eq(\"uid\", user.id)\n      .order(\"created_at\", { ascending: false });\n\n    if (!error && data) {\n      prefetchCache = {\n        data,\n        timestamp: now,\n        userId: user.id,\n      };\n    }\n  } catch (error) {\n    // Игнорируем ошибки prefetch - это не критично\n    console.debug(\"[prefetch] Ошибка prefetch аватаров:\", error);\n  }\n}\n\nexport function getPrefetchedAvatars(): PhotoAvatarRow[] | null {\n  const now = Date.now();\n  if (\n    prefetchCache.data &&\n    now - prefetchCache.timestamp < CACHE_DURATION\n  ) {\n    return prefetchCache.data;\n  }\n  return null;\n}\n\nexport function clearPrefetchCache(): void {\n  prefetchCache = {\n    data: null,\n    timestamp: 0,\n    userId: null,\n  };\n}\n\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAGA,0BAA0B;AAC1B,IAAI,gBAIA;IACF,MAAM;IACN,WAAW;IACX,QAAQ;AACV;AAEA,MAAM,iBAAiB,OAAO,YAAY;AAEnC,eAAe;IACpB,IAAI;QACF,gBAAgB;QAChB,MAAM,MAAM,KAAK,GAAG;QACpB,IACE,cAAc,IAAI,IAClB,cAAc,MAAM,IACpB,MAAM,cAAc,SAAS,GAAG,gBAChC;YACA,QAAQ,6BAA6B;QACvC;QAEA,wBAAwB;QACxB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;QAE/B,IAAI,CAAC,MAAM;YACT;QACF;QAEA,6CAA6C;QAC7C,IAAI,cAAc,MAAM,KAAK,KAAK,EAAE,IAAI,MAAM,cAAc,SAAS,GAAG,gBAAgB;YACtF;QACF;QAEA,0BAA0B;QAC1B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,OAAO,KAAK,EAAE,EACjB,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,CAAC,SAAS,MAAM;YAClB,gBAAgB;gBACd;gBACA,WAAW;gBACX,QAAQ,KAAK,EAAE;YACjB;QACF;IACF,EAAE,OAAO,OAAO;QACd,+CAA+C;QAC/C,QAAQ,KAAK,CAAC,wCAAwC;IACxD;AACF;AAEO,SAAS;IACd,MAAM,MAAM,KAAK,GAAG;IACpB,IACE,cAAc,IAAI,IAClB,MAAM,cAAc,SAAS,GAAG,gBAChC;QACA,OAAO,cAAc,IAAI;IAC3B;IACA,OAAO;AACT;AAEO,SAAS;IACd,gBAAgB;QACd,MAAM;QACN,WAAW;QACX,QAAQ;IACV;AACF"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/components/ui/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { LogoutModal } from \"./LogoutModal\";\nimport { prefetchAvatarsData } from \"@/lib/prefetchAvatars\";\n\nconst navLinks = [\n  { href: \"/\", label: \"Главная\" },\n  { href: \"/avatars\", label: \"Аватары\" },\n  { href: \"/voices\", label: \"Голоса\" },\n  { href: \"/material\", label: \"Материал\" },\n];\n\nexport function Header() {\n  const pathname = usePathname();\n  const [isLogoutModalOpen, setIsLogoutModalOpen] = useState(false);\n\n  return (\n    <>\n      <header className=\"h-16 w-full bg-white shadow-lg\">\n        <div className=\"mx-auto flex h-full w-full max-w-[1350px] items-center px-6\">\n          <nav className=\"flex flex-1 items-center gap-8\">\n            {navLinks.map(({ href, label }) => {\n              const isActive = pathname === href;\n              const handleMouseEnter = () => {\n                // Prefetch данные для страницы аватаров при наведении\n                if ((href === \"/avatars\" || href === \"/\") && !isActive) {\n                  prefetchAvatarsData();\n                }\n              };\n              \n              return (\n                <Link\n                  key={href}\n                  href={href}\n                  onMouseEnter={handleMouseEnter}\n                  prefetch={true}\n                  className={`text-lg font-semibold transition ${\n                    isActive\n                      ? \"text-gray-900\"\n                      : \"text-gray-500 hover:text-gray-800\"\n                  }`}\n                >\n                  {label}\n                </Link>\n              );\n            })}\n          </nav>\n          <div className=\"flex flex-none justify-end\">\n            <button\n              type=\"button\"\n              onClick={() => setIsLogoutModalOpen(true)}\n              className=\"rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-gray-800\"\n            >\n              Выйти\n            </button>\n          </div>\n        </div>\n      </header>\n      <LogoutModal\n        isOpen={isLogoutModalOpen}\n        onClose={() => setIsLogoutModalOpen(false)}\n      />\n    </>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQA,MAAM,WAAW;IACf;QAAE,MAAM;QAAK,OAAO;IAAU;IAC9B;QAAE,MAAM;QAAY,OAAO;IAAU;IACrC;QAAE,MAAM;QAAW,OAAO;IAAS;IACnC;QAAE,MAAM;QAAa,OAAO;IAAW;CACxC;AAEM,SAAS;;IACd,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAE3D,qBACE;;0BACE,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACZ,SAAS,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE;gCAC5B,MAAM,WAAW,aAAa;gCAC9B,MAAM,mBAAmB;oCACvB,sDAAsD;oCACtD,IAAI,CAAC,SAAS,cAAc,SAAS,GAAG,KAAK,CAAC,UAAU;wCACtD,IAAA,gJAAmB;oCACrB;gCACF;gCAEA,qBACE,6LAAC,0KAAI;oCAEH,MAAM;oCACN,cAAc;oCACd,UAAU;oCACV,WAAW,CAAC,iCAAiC,EAC3C,WACI,kBACA,qCACJ;8CAED;mCAVI;;;;;4BAaX;;;;;;sCAEF,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,MAAK;gCACL,SAAS,IAAM,qBAAqB;gCACpC,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;0BAMP,6LAAC,kJAAW;gBACV,QAAQ;gBACR,SAAS,IAAM,qBAAqB;;;;;;;;AAI5C;GApDgB;;QACG,oJAAW;;;KADd"}},
    {"offset": {"line": 330, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/components/ui/CosmoLoader.tsx"],"sourcesContent":["type CosmoLoaderProps = {\r\n  ariaLabel?: string;\r\n};\r\n\r\nexport function CosmoLoader({ ariaLabel = \"Загрузка...\" }: CosmoLoaderProps) {\r\n  return (\r\n    <div className=\"flex flex-col items-center\" role=\"status\" aria-live=\"polite\">\r\n      <div className=\"relative flex items-center justify-center\">\r\n        <div\r\n          className=\"h-10 w-10 animate-spin rounded-full border-[3px] border-transparent shadow-[0_0_18px_rgba(255,192,76,0.55)]\"\r\n          style={{\r\n            borderTopColor: \"#FFB347\",\r\n            borderRightColor: \"#FFC94C\",\r\n          }}\r\n        />\r\n        <div className=\"absolute h-3 w-3 rounded-full bg-[#FFB347] opacity-70 blur-sm\" />\r\n      </div>\r\n      <span className=\"sr-only\">{ariaLabel}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAIO,SAAS,YAAY,EAAE,YAAY,aAAa,EAAoB;IACzE,qBACE,6LAAC;QAAI,WAAU;QAA6B,MAAK;QAAS,aAAU;;0BAClE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,WAAU;wBACV,OAAO;4BACL,gBAAgB;4BAChB,kBAAkB;wBACpB;;;;;;kCAEF,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAEjB,6LAAC;gBAAK,WAAU;0BAAW;;;;;;;;;;;;AAGjC;KAhBgB"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/avatars/servers/DeletePhotoAvatar.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\nconst heygenApiKey = process.env.HEYGEN_API_KEY;\r\n\r\nif (!supabaseUrl) {\r\n  throw new Error(\"NEXT_PUBLIC_SUPABASE_URL не задан\");\r\n}\r\n\r\nif (!supabaseServiceRoleKey) {\r\n  throw new Error(\"SUPABASE_SERVICE_ROLE_KEY не задан\");\r\n}\r\n\r\nconst supabaseAdmin = createClient(supabaseUrl, supabaseServiceRoleKey);\r\n\r\ninterface DeletePhotoAvatarInput {\r\n  uid: string;\r\n  recordId?: string | null;\r\n  groupId?: string | null;\r\n  imageKey?: string | null;\r\n}\r\n\r\ninterface DeletePhotoAvatarResult {\r\n  success: boolean;\r\n  error?: string;\r\n}\r\n\r\nasync function deleteFromHeygen(groupId?: string | null) {\r\n  if (!groupId) {\r\n    return;\r\n  }\r\n\r\n  if (!heygenApiKey) {\r\n    throw new Error(\"HEYGEN_API_KEY не задан\");\r\n  }\r\n\r\n  const response = await fetch(\r\n    `https://api.heygen.com/v2/photo_avatar_group/${groupId}`,\r\n    {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"X-Api-Key\": heygenApiKey,\r\n      },\r\n    }\r\n  );\r\n\r\n  if (!response.ok && response.status !== 404) {\r\n    const message = await response.text();\r\n    throw new Error(\r\n      `Не удалось удалить аватар в HeyGen: ${message || response.statusText}`\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DeletePhotoAvatar({\r\n  uid,\r\n  recordId,\r\n  groupId,\r\n  imageKey,\r\n}: DeletePhotoAvatarInput): Promise<DeletePhotoAvatarResult> {\r\n  try {\r\n    if (!uid) {\r\n      return { success: false, error: \"Пользователь не найден\" };\r\n    }\r\n\r\n    if (!recordId && !groupId && !imageKey) {\r\n      return { success: false, error: \"Нет идентификатора записи\" };\r\n    }\r\n\r\n    await deleteFromHeygen(groupId);\r\n\r\n    let query = supabaseAdmin.from(\"photo_avatars\").delete().eq(\"uid\", uid);\r\n\r\n    if (recordId) {\r\n      query = query.eq(\"id\", recordId);\r\n    } else if (groupId) {\r\n      query = query.eq(\"group_id\", groupId);\r\n    } else if (imageKey) {\r\n      query = query.eq(\"image_key\", imageKey);\r\n    }\r\n\r\n    const { error } = await query;\r\n\r\n    if (error) {\r\n      throw new Error(error.message);\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    const message =\r\n      error instanceof Error ? error.message : \"Неизвестная ошибка\";\r\n    console.error(\"[DeletePhotoAvatar]\", message);\r\n    return { success: false, error: message };\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;IAyDsB,oBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/avatars/servers/UpdateAvatarName.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\nif (!supabaseUrl) {\r\n  throw new Error(\"NEXT_PUBLIC_SUPABASE_URL не задан\");\r\n}\r\n\r\nif (!supabaseServiceRoleKey) {\r\n  throw new Error(\"SUPABASE_SERVICE_ROLE_KEY не задан\");\r\n}\r\n\r\nconst supabaseAdmin = createClient(supabaseUrl, supabaseServiceRoleKey);\r\n\r\ninterface UpdateAvatarNameInput {\r\n  uid: string;\r\n  recordId: string;\r\n  newName: string;\r\n}\r\n\r\ninterface UpdateAvatarNameResult {\r\n  success: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport async function UpdateAvatarName({\r\n  uid,\r\n  recordId,\r\n  newName,\r\n}: UpdateAvatarNameInput): Promise<UpdateAvatarNameResult> {\r\n  try {\r\n    if (!uid) {\r\n      return { success: false, error: \"Пользователь не найден\" };\r\n    }\r\n\r\n    if (!recordId) {\r\n      return { success: false, error: \"ID записи не указан\" };\r\n    }\r\n\r\n    if (!newName || !newName.trim()) {\r\n      return { success: false, error: \"Имя не может быть пустым\" };\r\n    }\r\n\r\n    const trimmedName = newName.trim();\r\n\r\n    const { error } = await supabaseAdmin\r\n      .from(\"photo_avatars\")\r\n      .update({ name: trimmedName })\r\n      .eq(\"id\", recordId)\r\n      .eq(\"uid\", uid);\r\n\r\n    if (error) {\r\n      throw new Error(error.message);\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    const message =\r\n      error instanceof Error ? error.message : \"Неизвестная ошибка\";\r\n    console.error(\"[UpdateAvatarName]\", message);\r\n    return { success: false, error: message };\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;IA4BsB,mBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/avatars/components/DeleteAvatarModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\ninterface DeleteAvatarModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void | Promise<void>;\r\n  avatarName: string;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nexport function DeleteAvatarModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  avatarName,\r\n  isDeleting = false,\r\n}: DeleteAvatarModalProps) {\r\n  if (!isOpen) return null;\r\n\r\n  const handleConfirm = async () => {\r\n    await onConfirm();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"mx-4 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl\">\r\n        <h2 className=\"mb-4 text-xl font-semibold text-gray-900\">\r\n          Удаление аватара\r\n        </h2>\r\n        <p className=\"mb-6 text-gray-600\">\r\n          Вы действительно хотите удалить аватар «{avatarName}»?\r\n        </p>\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            disabled={isDeleting}\r\n            className=\"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\r\n          >\r\n            Отмена\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleConfirm}\r\n            disabled={isDeleting}\r\n            className=\"flex-1 rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-red-700 disabled:opacity-50\"\r\n          >\r\n            {isDeleting ? \"Удаляем...\" : \"Удалить\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAUO,SAAS,kBAAkB,EAChC,MAAM,EACN,OAAO,EACP,SAAS,EACT,UAAU,EACV,aAAa,KAAK,EACK;IACvB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB;QACpB,MAAM;IACR;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAA2C;;;;;;8BAGzD,6LAAC;oBAAE,WAAU;;wBAAqB;wBACS;wBAAW;;;;;;;8BAEtD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,aAAa,eAAe;;;;;;;;;;;;;;;;;;;;;;;AAMzC;KA3CgB"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/avatars/components/EditAvatarModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\ninterface EditAvatarModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: (newName: string) => void | Promise<void>;\n  currentName: string;\n  isSaving?: boolean;\n}\n\nexport function EditAvatarModal({\n  isOpen,\n  onClose,\n  onConfirm,\n  currentName,\n  isSaving = false,\n}: EditAvatarModalProps) {\n  const [newName, setNewName] = useState(currentName);\n\n  useEffect(() => {\n    if (isOpen) {\n      setNewName(currentName);\n    }\n  }, [isOpen, currentName]);\n\n  if (!isOpen) return null;\n\n  const handleConfirm = async () => {\n    if (!newName.trim()) {\n      return;\n    }\n    await onConfirm(newName.trim());\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" && !isSaving && newName.trim()) {\n      handleConfirm();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div className=\"mx-4 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl\">\n        <h2 className=\"mb-4 text-xl font-semibold text-gray-900\">\n          Редактировать имя\n        </h2>\n        <input\n          type=\"text\"\n          value={newName}\n          onChange={(e) => setNewName(e.target.value)}\n          onKeyDown={handleKeyDown}\n          disabled={isSaving}\n          placeholder=\"Введите новое имя\"\n          className=\"mb-6 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-base text-gray-900 outline-none transition focus:border-gray-400 disabled:opacity-50\"\n          autoFocus\n        />\n        <div className=\"flex gap-3\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            disabled={isSaving}\n            className=\"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\n          >\n            Отмена\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleConfirm}\n            disabled={isSaving || !newName.trim()}\n            className=\"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:opacity-50\"\n          >\n            {isSaving ? \"Сохраняем...\" : \"Сохранить\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAYO,SAAS,gBAAgB,EAC9B,MAAM,EACN,OAAO,EACP,SAAS,EACT,WAAW,EACX,WAAW,KAAK,EACK;;IACrB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;qCAAC;YACR,IAAI,QAAQ;gBACV,WAAW;YACb;QACF;oCAAG;QAAC;QAAQ;KAAY;IAExB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB;QACpB,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB;QACF;QACA,MAAM,UAAU,QAAQ,IAAI;IAC9B;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,YAAY,QAAQ,IAAI,IAAI;YACpD;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAA2C;;;;;;8BAGzD,6LAAC;oBACC,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oBAC1C,WAAW;oBACX,UAAU;oBACV,aAAY;oBACZ,WAAU;oBACV,SAAS;;;;;;8BAEX,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU,YAAY,CAAC,QAAQ,IAAI;4BACnC,WAAU;sCAET,WAAW,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMzC;GAnEgB;KAAA"}},
    {"offset": {"line": 630, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/avatars/components/PhotoAvatarGrid.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport { useState, useRef, useEffect } from \"react\";\nimport type { PhotoAvatarRow } from \"../servers/UploadAvatar\";\nimport { DeletePhotoAvatar } from \"../servers/DeletePhotoAvatar\";\nimport { UpdateAvatarName } from \"../servers/UpdateAvatarName\";\nimport { DeleteAvatarModal } from \"./DeleteAvatarModal\";\nimport { EditAvatarModal } from \"./EditAvatarModal\";\n\ninterface PhotoAvatarGridProps {\n  avatars: PhotoAvatarRow[];\n  currentUserId?: string | null;\n  onAvatarDeleted?: () => void | Promise<void>;\n}\n\nexport function PhotoAvatarGrid({\n  avatars,\n  currentUserId,\n  onAvatarDeleted,\n}: PhotoAvatarGridProps) {\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [openMenuId, setOpenMenuId] = useState<string | null>(null);\n  const [hoveredCardId, setHoveredCardId] = useState<string | null>(null);\n  const [avatarToDelete, setAvatarToDelete] = useState<{\n    avatar: PhotoAvatarRow;\n    key: string;\n  } | null>(null);\n  const [avatarToEdit, setAvatarToEdit] = useState<{\n    avatar: PhotoAvatarRow;\n    key: string;\n  } | null>(null);\n  const menuRefs = useRef<{ [key: string]: HTMLDivElement | null }>({});\n  const closeMenuTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Закрываем меню при клике вне его\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (openMenuId) {\n        const menuElement = menuRefs.current[openMenuId];\n        if (menuElement && !menuElement.contains(event.target as Node)) {\n          setOpenMenuId(null);\n        }\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [openMenuId]);\n\n  // Очищаем таймер при размонтировании\n  useEffect(() => {\n    return () => {\n      if (closeMenuTimeoutRef.current) {\n        clearTimeout(closeMenuTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const handleMenuClick = (key: string, event: React.MouseEvent) => {\n    event.stopPropagation();\n    setOpenMenuId(openMenuId === key ? null : key);\n  };\n\n  const handleEditClick = (avatar: PhotoAvatarRow, key: string) => {\n    setOpenMenuId(null);\n    setAvatarToEdit({ avatar, key });\n    setIsEditModalOpen(true);\n  };\n\n  const handleDeleteClick = (avatar: PhotoAvatarRow, key: string) => {\n    setOpenMenuId(null);\n    if (!currentUserId) {\n      alert(\"Не удалось определить пользователя\");\n      return;\n    }\n    setAvatarToDelete({ avatar, key });\n    setIsDeleteModalOpen(true);\n  };\n\n  const handleEditConfirm = async (newName: string) => {\n    if (!avatarToEdit || !currentUserId || !avatarToEdit.avatar.id) {\n      return;\n    }\n\n    const { avatar, key } = avatarToEdit;\n    \n    // Проверяем наличие id после деструктуризации\n    if (!avatar.id) {\n      return;\n    }\n\n    try {\n      setEditingId(key);\n      const result = await UpdateAvatarName({\n        uid: currentUserId,\n        recordId: avatar.id,\n        newName,\n      });\n\n      if (!result.success) {\n        throw new Error(result.error || \"Не удалось обновить имя\");\n      }\n\n      setIsEditModalOpen(false);\n      setAvatarToEdit(null);\n      await onAvatarDeleted?.();\n    } catch (error) {\n      console.error(\"[avatars] Ошибка редактирования:\", error);\n      alert(\n        `Ошибка при редактировании: ${\n          error instanceof Error ? error.message : \"Неизвестная ошибка\"\n        }`\n      );\n    } finally {\n      setEditingId(null);\n    }\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!avatarToDelete || !currentUserId) {\n      return;\n    }\n\n    const { avatar, key } = avatarToDelete;\n\n    try {\n      setDeletingId(key);\n      const result = await DeletePhotoAvatar({\n        uid: currentUserId,\n        recordId: avatar.id ?? null,\n        groupId: avatar.group_id ?? avatar.hey_gen_id ?? null,\n        imageKey: avatar.image_key,\n      });\n\n      if (!result.success) {\n        throw new Error(result.error || \"Не удалось удалить аватар\");\n      }\n\n      setIsDeleteModalOpen(false);\n      setAvatarToDelete(null);\n      await onAvatarDeleted?.();\n    } catch (error) {\n      console.error(\"[avatars] Ошибка удаления:\", error);\n      alert(\n        `Ошибка при удалении: ${\n          error instanceof Error ? error.message : \"Неизвестная ошибка\"\n        }`\n      );\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  const handleDeleteCancel = () => {\n    setIsDeleteModalOpen(false);\n    setAvatarToDelete(null);\n  };\n\n  const handleEditCancel = () => {\n    setIsEditModalOpen(false);\n    setAvatarToEdit(null);\n  };\n\n  return (\n    <div className=\"grid w-full gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n      {avatars.map((avatar) => {\n        const key =\n          avatar.id ??\n          avatar.hey_gen_id ??\n          avatar.group_id ??\n          `${avatar.uid}-${avatar.image_key}`;\n\n        const isHovered = hoveredCardId === key;\n        const showMenuButton = isHovered || openMenuId === key;\n\n        return (\n          <article\n            key={key}\n            className=\"group relative rounded-3xl border border-gray-100 bg-white p-4 shadow-sm ring-1 ring-black/5 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg\"\n            onMouseLeave={() => {\n              setHoveredCardId(null);\n              // Закрываем меню через 1 секунду после ухода курсора\n              if (closeMenuTimeoutRef.current) {\n                clearTimeout(closeMenuTimeoutRef.current);\n              }\n              closeMenuTimeoutRef.current = setTimeout(() => {\n                if (openMenuId === key) {\n                  setOpenMenuId(null);\n                }\n              }, 500);\n            }}\n            onMouseEnter={() => {\n              setHoveredCardId(key);\n              // Отменяем закрытие меню если курсор вернулся\n              if (closeMenuTimeoutRef.current) {\n                clearTimeout(closeMenuTimeoutRef.current);\n                closeMenuTimeoutRef.current = null;\n              }\n            }}\n          >\n            <p className=\"mb-3 text-center text-xl font-semibold text-gray-900\">\n              {avatar.name}\n            </p>\n            <div className=\"relative aspect-[3/4] w-full overflow-hidden rounded-2xl\">\n              <Image\n                src={avatar.photo}\n                alt={`Фото аватара ${avatar.name}`}\n                fill\n                sizes=\"(min-width: 1280px) 25vw, (min-width: 1024px) 33vw, (min-width: 640px) 50vw, 100vw\"\n                className=\"object-contain\"\n                unoptimized\n              />\n              {/* Три точки меню */}\n              <div className=\"absolute right-3 top-3\">\n              <button\n                type=\"button\"\n                  onClick={(e) => handleMenuClick(key, e)}\n                  className={`flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-gray-600 shadow-md transition-all duration-200 hover:bg-white hover:text-gray-900 ${\n                    showMenuButton ? \"opacity-100\" : \"opacity-0\"\n                  }`}\n                  aria-label=\"Меню\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth={2.5}\n                    className=\"h-4 w-4\"\n                  >\n                    <circle cx=\"5\" cy=\"12\" r=\"1.5\" />\n                    <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n                    <circle cx=\"19\" cy=\"12\" r=\"1.5\" />\n                  </svg>\n                </button>\n                {/* Выпадающее меню */}\n                {openMenuId === key && (\n                  <div\n                    ref={(el) => {\n                      menuRefs.current[key] = el;\n                    }}\n                    className=\"absolute right-0 top-10 z-50 min-w-[160px] rounded-lg border border-gray-200 bg-white shadow-lg\"\n                  >\n                    <button\n                      type=\"button\"\n                      onClick={() => handleEditClick(avatar, key)}\n                      disabled={editingId === key || deletingId === key}\n                      className=\"w-full rounded-t-lg px-4 py-2 text-left text-sm text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\n                    >\n                      Редактировать\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleDeleteClick(avatar, key)}\n                      disabled={editingId === key || deletingId === key}\n                      className=\"w-full rounded-b-lg px-4 py-2 text-left text-sm text-red-600 transition hover:bg-red-50 disabled:opacity-50\"\n                    >\n                      Удалить\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n            {avatar.created_at && (\n              <p className=\"mt-3 text-center text-xs text-gray-400\">\n                {new Intl.DateTimeFormat(\"ru-RU\", {\n                  dateStyle: \"medium\",\n                  timeStyle: \"short\",\n                }).format(new Date(avatar.created_at))}\n              </p>\n            )}\n          </article>\n        );\n      })}\n      <DeleteAvatarModal\n        isOpen={isDeleteModalOpen}\n        onClose={handleDeleteCancel}\n        onConfirm={handleDeleteConfirm}\n        avatarName={avatarToDelete?.avatar.name ?? \"\"}\n        isDeleting={avatarToDelete !== null && deletingId === avatarToDelete.key}\n      />\n      <EditAvatarModal\n        isOpen={isEditModalOpen}\n        onClose={handleEditCancel}\n        onConfirm={handleEditConfirm}\n        currentName={avatarToEdit?.avatar.name ?? \"\"}\n        isSaving={avatarToEdit !== null && editingId === avatarToEdit.key}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/AvatarsEmptyState.tsx"],"sourcesContent":["\"use client\";\r\n\r\nexport function AvatarsEmptyState() {\r\n  return (\r\n    <div className=\"group relative overflow-hidden rounded-3xl border-2 border-dashed border-blue-200 bg-gradient-to-br from-blue-50/50 to-indigo-50/50 p-12 transition-all hover:border-blue-300 hover:shadow-lg\">\r\n      <div className=\"relative z-10 flex flex-col items-center text-center\">\r\n        <div className=\"mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-blue-100 transition-transform group-hover:scale-110\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-12 w-12 text-blue-600\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth={1.5}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <h3 className=\"mb-2 text-xl font-bold text-gray-900\">\r\n          Нет аватаров\r\n        </h3>\r\n        <p className=\"max-w-sm text-sm text-gray-600\">\r\n          Создайте аватар для начала работы с видео\r\n        </p>\r\n      </div>\r\n      <div className=\"absolute inset-0 opacity-5\">\r\n        <div className=\"absolute left-10 top-10 h-32 w-32 rounded-full bg-blue-400 blur-3xl\" />\r\n        <div className=\"absolute bottom-10 right-10 h-40 w-40 rounded-full bg-indigo-400 blur-3xl\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,OAAM;4BACN,WAAU;4BACV,MAAK;4BACL,SAAQ;4BACR,QAAO;4BACP,aAAa;sCAEb,cAAA,6LAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,GAAE;;;;;;;;;;;;;;;;kCAIR,6LAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,6LAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;;0BAIhD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;KAjCgB"}},
    {"offset": {"line": 1099, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/AvatarsSection.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { getPrefetchedAvatars, clearPrefetchCache } from \"@/lib/prefetchAvatars\";\r\n\r\nimport { CosmoLoader } from \"@/components/ui/CosmoLoader\";\r\nimport { PhotoAvatarGrid } from \"@/app/avatars/components/PhotoAvatarGrid\";\r\nimport { AvatarsEmptyState } from \"./AvatarsEmptyState\";\r\nimport type { PhotoAvatarRow } from \"@/app/avatars/servers/UploadAvatar\";\r\n\r\nexport function AvatarsSection() {\r\n  const router = useRouter();\r\n  const [isFetchingAvatars, setIsFetchingAvatars] = useState(true);\r\n  const [photoAvatars, setPhotoAvatars] = useState<PhotoAvatarRow[]>([]);\r\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchPhotoAvatars = async () => {\r\n      const prefetchedData = getPrefetchedAvatars();\r\n      if (prefetchedData) {\r\n        setPhotoAvatars(prefetchedData);\r\n        setIsFetchingAvatars(false);\r\n        clearPrefetchCache();\r\n        \r\n        const {\r\n          data: { user },\r\n        } = await supabase.auth.getUser();\r\n        \r\n        if (!isMounted) return;\r\n        \r\n        if (!user) {\r\n          router.push(\"/\");\r\n          setCurrentUserId(null);\r\n          setPhotoAvatars([]);\r\n          return;\r\n        }\r\n        \r\n        setCurrentUserId(user.id);\r\n        return;\r\n      }\r\n\r\n      setIsFetchingAvatars(true);\r\n\r\n      const {\r\n        data: { user },\r\n      } = await supabase.auth.getUser();\r\n\r\n      if (!isMounted) return;\r\n\r\n      if (!user) {\r\n        router.push(\"/\");\r\n        setCurrentUserId(null);\r\n        setPhotoAvatars([]);\r\n        setIsFetchingAvatars(false);\r\n        return;\r\n      }\r\n\r\n      setCurrentUserId(user.id);\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"photo_avatars\")\r\n        .select(\"*\")\r\n        .eq(\"uid\", user.id)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (!isMounted) return;\r\n\r\n      if (error) {\r\n        console.error(\"[avatars] Ошибка загрузки аватаров:\", error);\r\n      } else {\r\n        setPhotoAvatars(data ?? []);\r\n      }\r\n      setIsFetchingAvatars(false);\r\n    };\r\n\r\n    fetchPhotoAvatars();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [router]);\r\n\r\n  const refetchPhotoAvatars = useCallback(async () => {\r\n    if (!currentUserId) return;\r\n\r\n    clearPrefetchCache();\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"photo_avatars\")\r\n      .select(\"*\")\r\n      .eq(\"uid\", currentUserId)\r\n      .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) {\r\n      console.error(\"[avatars] Ошибка загрузки аватаров:\", error);\r\n    } else {\r\n      setPhotoAvatars(data ?? []);\r\n    }\r\n  }, [currentUserId]);\r\n\r\n  const hasPhotoAvatars = photoAvatars.length > 0;\r\n\r\n  return (\r\n    <section className=\"mb-12\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Мои аватары</h2>\r\n      </div>\r\n      {isFetchingAvatars ? (\r\n        <div className=\"flex min-h-[300px] items-center justify-center rounded-3xl border border-gray-100 bg-gray-50\">\r\n          <CosmoLoader ariaLabel=\"Загружаем фото-аватары...\" />\r\n        </div>\r\n      ) : !hasPhotoAvatars ? (\r\n        <AvatarsEmptyState />\r\n      ) : (\r\n        <PhotoAvatarGrid\r\n          avatars={photoAvatars}\r\n          currentUserId={currentUserId}\r\n          onAvatarDeleted={refetchPhotoAvatars}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AATA;;;;;;;;AAYO,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAmB,EAAE;IACrE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAgB;IAElE,IAAA,0KAAS;oCAAC;YACR,IAAI,YAAY;YAEhB,MAAM;8DAAoB;oBACxB,MAAM,iBAAiB,IAAA,iJAAoB;oBAC3C,IAAI,gBAAgB;wBAClB,gBAAgB;wBAChB,qBAAqB;wBACrB,IAAA,+IAAkB;wBAElB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;wBAE/B,IAAI,CAAC,WAAW;wBAEhB,IAAI,CAAC,MAAM;4BACT,OAAO,IAAI,CAAC;4BACZ,iBAAiB;4BACjB,gBAAgB,EAAE;4BAClB;wBACF;wBAEA,iBAAiB,KAAK,EAAE;wBACxB;oBACF;oBAEA,qBAAqB;oBAErB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;oBAE/B,IAAI,CAAC,WAAW;oBAEhB,IAAI,CAAC,MAAM;wBACT,OAAO,IAAI,CAAC;wBACZ,iBAAiB;wBACjB,gBAAgB,EAAE;wBAClB,qBAAqB;wBACrB;oBACF;oBAEA,iBAAiB,KAAK,EAAE;oBAExB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,OAAO,KAAK,EAAE,EACjB,KAAK,CAAC,cAAc;wBAAE,WAAW;oBAAM;oBAE1C,IAAI,CAAC,WAAW;oBAEhB,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,uCAAuC;oBACvD,OAAO;wBACL,gBAAgB,QAAQ,EAAE;oBAC5B;oBACA,qBAAqB;gBACvB;;YAEA;YAEA;4CAAO;oBACL,YAAY;gBACd;;QACF;mCAAG;QAAC;KAAO;IAEX,MAAM,sBAAsB,IAAA,4KAAW;2DAAC;YACtC,IAAI,CAAC,eAAe;YAEpB,IAAA,+IAAkB;YAElB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,OAAO,eACV,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,uCAAuC;YACvD,OAAO;gBACL,gBAAgB,QAAQ,EAAE;YAC5B;QACF;0DAAG;QAAC;KAAc;IAElB,MAAM,kBAAkB,aAAa,MAAM,GAAG;IAE9C,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;YAElD,kCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,kJAAW;oBAAC,WAAU;;;;;;;;;;uBAEvB,CAAC,gCACH,6LAAC,2KAAiB;;;;qCAElB,6LAAC,sKAAe;gBACd,SAAS;gBACT,eAAe;gBACf,iBAAiB;;;;;;;;;;;;AAK3B;GAlHgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 1264, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/voices/components/VoiceCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { ReactNode, useEffect, useRef, useState } from \"react\";\n\ninterface VoiceCardProps {\n  name: string;\n  url: string;\n  description?: string | null;\n  menuSlot?: ReactNode;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n}\n\nexport function VoiceCard({\n  name,\n  url,\n  description,\n  menuSlot,\n  onMouseEnter,\n  onMouseLeave,\n}: VoiceCardProps) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const formattedDescription = description?.trim() ?? \"\";\n\n  const handlePlay = () => {\n    if (!audioRef.current) {\n      audioRef.current = new Audio(url);\n      audioRef.current.onended = () => setIsPlaying(false);\n      audioRef.current.onerror = () => {\n        setIsPlaying(false);\n        alert(\"Ошибка воспроизведения аудио\");\n      };\n    }\n\n    if (isPlaying) {\n      audioRef.current.pause();\n      audioRef.current.currentTime = 0;\n      setIsPlaying(false);\n    } else {\n      audioRef.current.play();\n      setIsPlaying(true);\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <article\n      className=\"group relative rounded-3xl border border-gray-100 bg-white p-6 shadow-sm ring-1 ring-black/5 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg\"\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {menuSlot}\n      <div className=\"flex items-center gap-4\">\n        <button\n          type=\"button\"\n          onClick={handlePlay}\n          className=\"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-purple-600 text-white transition hover:bg-purple-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600\"\n          aria-label={isPlaying ? \"Остановить воспроизведение\" : \"Проиграть голос\"}\n        >\n          {isPlaying ? (\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              className=\"h-6 w-6\"\n            >\n              <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n            </svg>\n          ) : (\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              className=\"h-6 w-6\"\n            >\n              <path d=\"M8 5v14l11-7z\" />\n            </svg>\n          )}\n        </button>\n        <div className=\"min-w-0 flex-1\">\n          <p className=\"text-xl font-semibold text-gray-900\">{name}</p>\n        </div>\n      </div>\n      <p className=\"mt-4 text-sm text-gray-600\">\n        <span className=\"font-semibold text-gray-900\">Описание:</span>{\" \"}\n        {formattedDescription || \"Не указано\"}\n      </p>\n    </article>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAaO,SAAS,UAAU,EACxB,IAAI,EACJ,GAAG,EACH,WAAW,EACX,QAAQ,EACR,YAAY,EACZ,YAAY,EACG;;IACf,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,WAAW,IAAA,uKAAM,EAA0B;IACjD,MAAM,uBAAuB,aAAa,UAAU;IAEpD,MAAM,aAAa;QACjB,IAAI,CAAC,SAAS,OAAO,EAAE;YACrB,SAAS,OAAO,GAAG,IAAI,MAAM;YAC7B,SAAS,OAAO,CAAC,OAAO,GAAG,IAAM,aAAa;YAC9C,SAAS,OAAO,CAAC,OAAO,GAAG;gBACzB,aAAa;gBACb,MAAM;YACR;QACF;QAEA,IAAI,WAAW;YACb,SAAS,OAAO,CAAC,KAAK;YACtB,SAAS,OAAO,CAAC,WAAW,GAAG;YAC/B,aAAa;QACf,OAAO;YACL,SAAS,OAAO,CAAC,IAAI;YACrB,aAAa;QACf;IACF;IAEA,IAAA,0KAAS;+BAAC;YACR;uCAAO;oBACL,IAAI,SAAS,OAAO,EAAE;wBACpB,SAAS,OAAO,CAAC,KAAK;wBACtB,SAAS,OAAO,GAAG;oBACrB;gBACF;;QACF;8BAAG,EAAE;IAEL,qBACE,6LAAC;QACC,WAAU;QACV,cAAc;QACd,cAAc;;YAEb;0BACD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAY,YAAY,+BAA+B;kCAEtD,0BACC,6LAAC;4BACC,OAAM;4BACN,SAAQ;4BACR,MAAK;4BACL,WAAU;sCAEV,cAAA,6LAAC;gCAAK,GAAE;;;;;;;;;;iDAGV,6LAAC;4BACC,OAAM;4BACN,SAAQ;4BACR,MAAK;4BACL,WAAU;sCAEV,cAAA,6LAAC;gCAAK,GAAE;;;;;;;;;;;;;;;;kCAId,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;sCAAuC;;;;;;;;;;;;;;;;;0BAGxD,6LAAC;gBAAE,WAAU;;kCACX,6LAAC;wBAAK,WAAU;kCAA8B;;;;;;oBAAiB;oBAC9D,wBAAwB;;;;;;;;;;;;;AAIjC;GArFgB;KAAA"}},
    {"offset": {"line": 1419, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/voices/components/VoiceDeleteModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\ninterface VoiceDeleteModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void | Promise<void>;\r\n  voiceName: string;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nexport function VoiceDeleteModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  voiceName,\r\n  isDeleting = false,\r\n}: VoiceDeleteModalProps) {\r\n  if (!isOpen) {\r\n    return null;\r\n  }\r\n\r\n  const handleConfirm = async () => {\r\n    await onConfirm();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"mx-4 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl\">\r\n        <h2 className=\"mb-4 text-xl font-semibold text-gray-900\">\r\n          Удаление голоса\r\n        </h2>\r\n        <p className=\"mb-6 text-gray-600\">\r\n          Вы действительно хотите удалить голос «{voiceName}»?\r\n        </p>\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            disabled={isDeleting}\r\n            className=\"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\r\n          >\r\n            Отмена\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleConfirm}\r\n            disabled={isDeleting}\r\n            className=\"flex-1 rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-red-700 disabled:opacity-50\"\r\n          >\r\n            {isDeleting ? \"Удаляем...\" : \"Удалить\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAUO,SAAS,iBAAiB,EAC/B,MAAM,EACN,OAAO,EACP,SAAS,EACT,SAAS,EACT,aAAa,KAAK,EACI;IACtB,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,MAAM,gBAAgB;QACpB,MAAM;IACR;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAA2C;;;;;;8BAGzD,6LAAC;oBAAE,WAAU;;wBAAqB;wBACQ;wBAAU;;;;;;;8BAEpD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,aAAa,eAAe;;;;;;;;;;;;;;;;;;;;;;;AAMzC;KA7CgB"}},
    {"offset": {"line": 1511, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/voices/components/VoiceEditModal.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  type KeyboardEvent as ReactKeyboardEvent,\n  useEffect,\n  useState,\n} from \"react\";\n\nexport interface VoiceEditFormValues {\n  name: string;\n  description: string;\n}\n\nconst MAX_DESCRIPTION_LENGTH = 100;\n\ninterface VoiceEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: (values: VoiceEditFormValues) => void | Promise<void>;\n  currentName: string;\n  currentDescription: string;\n  isSaving?: boolean;\n}\n\nexport function VoiceEditModal({\n  isOpen,\n  onClose,\n  onConfirm,\n  currentName,\n  currentDescription,\n  isSaving = false,\n}: VoiceEditModalProps) {\n  const [formValues, setFormValues] = useState<VoiceEditFormValues>({\n    name: currentName,\n    description: currentDescription,\n  });\n\n  useEffect(() => {\n    if (isOpen) {\n      setFormValues({\n        name: currentName,\n        description: currentDescription,\n      });\n    }\n  }, [isOpen, currentName, currentDescription]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const handleConfirm = async () => {\n    if (!formValues.name.trim()) {\n      return;\n    }\n\n    await onConfirm({\n      name: formValues.name.trim(),\n      description: formValues.description.trim().slice(0, MAX_DESCRIPTION_LENGTH),\n    });\n  };\n\n  const handleKeyDown = (\n    event: ReactKeyboardEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const isTextarea = event.currentTarget.tagName === \"TEXTAREA\";\n    if (\n      event.key === \"Enter\" &&\n      !isTextarea &&\n      !isSaving &&\n      formValues.name.trim()\n    ) {\n      event.preventDefault();\n      handleConfirm();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div className=\"mx-4 w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl\">\n        <h2 className=\"mb-4 text-xl font-semibold text-gray-900\">\n          Редактировать голос\n        </h2>\n        <div className=\"space-y-4\">\n          <div>\n            <label\n              htmlFor=\"voice-name\"\n              className=\"mb-2 block text-xs font-semibold uppercase tracking-wide text-gray-500\"\n            >\n              Имя\n            </label>\n            <input\n              id=\"voice-name\"\n              type=\"text\"\n              value={formValues.name}\n              onChange={(event) =>\n                setFormValues((prev) => ({ ...prev, name: event.target.value }))\n              }\n              onKeyDown={handleKeyDown}\n              disabled={isSaving}\n              placeholder=\"Введите новое имя\"\n              className=\"w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-base text-gray-900 outline-none transition focus:border-gray-400 disabled:opacity-50\"\n              autoFocus\n            />\n          </div>\n          <div>\n            <div className=\"mb-2 flex items-center justify-between\">\n              <label\n                htmlFor=\"voice-description\"\n                className=\"block text-xs font-semibold uppercase tracking-wide text-gray-500\"\n              >\n                Описание\n              </label>\n              <span className={`text-xs ${\n                formValues.description.length > MAX_DESCRIPTION_LENGTH \n                  ? \"text-red-500\" \n                  : \"text-gray-400\"\n              }`}>\n                {formValues.description.length}/{MAX_DESCRIPTION_LENGTH}\n              </span>\n            </div>\n            <textarea\n              id=\"voice-description\"\n              value={formValues.description}\n              onChange={(event) => {\n                const value = event.target.value;\n                if (value.length <= MAX_DESCRIPTION_LENGTH) {\n                  setFormValues((prev) => ({\n                    ...prev,\n                    description: value,\n                  }));\n                }\n              }}\n              maxLength={MAX_DESCRIPTION_LENGTH}\n              onKeyDown={handleKeyDown}\n              disabled={isSaving}\n              placeholder=\"Добавьте описание голоса\"\n              className=\"h-28 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-base text-gray-900 outline-none transition focus:border-gray-400 disabled:opacity-50\"\n            />\n          </div>\n        </div>\n        <div className=\"mt-6 flex gap-3\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            disabled={isSaving}\n            className=\"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\n          >\n            Отмена\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleConfirm}\n            disabled={isSaving || !formValues.name.trim()}\n            className=\"flex-1 rounded-lg bg-purple-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-purple-700 disabled:opacity-50\"\n          >\n            {isSaving ? \"Сохраняем...\" : \"Сохранить\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAaA,MAAM,yBAAyB;AAWxB,SAAS,eAAe,EAC7B,MAAM,EACN,OAAO,EACP,SAAS,EACT,WAAW,EACX,kBAAkB,EAClB,WAAW,KAAK,EACI;;IACpB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAsB;QAChE,MAAM;QACN,aAAa;IACf;IAEA,IAAA,0KAAS;oCAAC;YACR,IAAI,QAAQ;gBACV,cAAc;oBACZ,MAAM;oBACN,aAAa;gBACf;YACF;QACF;mCAAG;QAAC;QAAQ;QAAa;KAAmB;IAE5C,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,MAAM,gBAAgB;QACpB,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI;YAC3B;QACF;QAEA,MAAM,UAAU;YACd,MAAM,WAAW,IAAI,CAAC,IAAI;YAC1B,aAAa,WAAW,WAAW,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG;QACtD;IACF;IAEA,MAAM,gBAAgB,CACpB;QAEA,MAAM,aAAa,MAAM,aAAa,CAAC,OAAO,KAAK;QACnD,IACE,MAAM,GAAG,KAAK,WACd,CAAC,cACD,CAAC,YACD,WAAW,IAAI,CAAC,IAAI,IACpB;YACA,MAAM,cAAc;YACpB;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAA2C;;;;;;8BAGzD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCACC,SAAQ;oCACR,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO,WAAW,IAAI;oCACtB,UAAU,CAAC,QACT,cAAc,CAAC,OAAS,CAAC;gDAAE,GAAG,IAAI;gDAAE,MAAM,MAAM,MAAM,CAAC,KAAK;4CAAC,CAAC;oCAEhE,WAAW;oCACX,UAAU;oCACV,aAAY;oCACZ,WAAU;oCACV,SAAS;;;;;;;;;;;;sCAGb,6LAAC;;8CACC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,SAAQ;4CACR,WAAU;sDACX;;;;;;sDAGD,6LAAC;4CAAK,WAAW,CAAC,QAAQ,EACxB,WAAW,WAAW,CAAC,MAAM,GAAG,yBAC5B,iBACA,iBACJ;;gDACC,WAAW,WAAW,CAAC,MAAM;gDAAC;gDAAE;;;;;;;;;;;;;8CAGrC,6LAAC;oCACC,IAAG;oCACH,OAAO,WAAW,WAAW;oCAC7B,UAAU,CAAC;wCACT,MAAM,QAAQ,MAAM,MAAM,CAAC,KAAK;wCAChC,IAAI,MAAM,MAAM,IAAI,wBAAwB;4CAC1C,cAAc,CAAC,OAAS,CAAC;oDACvB,GAAG,IAAI;oDACP,aAAa;gDACf,CAAC;wCACH;oCACF;oCACA,WAAW;oCACX,WAAW;oCACX,UAAU;oCACV,aAAY;oCACZ,WAAU;;;;;;;;;;;;;;;;;;8BAIhB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI;4BAC3C,WAAU;sCAET,WAAW,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMzC;GAzIgB;KAAA"}},
    {"offset": {"line": 1732, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/voices/servers/DeleteVoice.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\nif (!supabaseUrl) {\n  throw new Error(\"NEXT_PUBLIC_SUPABASE_URL не задан\");\n}\n\nif (!supabaseServiceRoleKey) {\n  throw new Error(\"SUPABASE_SERVICE_ROLE_KEY не задан\");\n}\n\nconst supabaseAdmin = createClient(supabaseUrl, supabaseServiceRoleKey);\n\ninterface DeleteVoiceInput {\n  uid: string;\n  voiceId: string;\n}\n\ninterface DeleteVoiceResult {\n  success: boolean;\n  error?: string;\n}\n\nexport async function DeleteVoice({\n  uid,\n  voiceId,\n}: DeleteVoiceInput): Promise<DeleteVoiceResult> {\n  try {\n    if (!uid) {\n      return { success: false, error: \"Пользователь не найден\" };\n    }\n\n    if (!voiceId) {\n      return { success: false, error: \"ID голоса не указан\" };\n    }\n\n    // Сначала получаем запись из таблицы, чтобы извлечь voice_id и название голоса\n    const { data: voiceRecord, error: fetchError } = await supabaseAdmin\n      .from(\"voices\")\n      .select(\"voice_id, name\")\n      .eq(\"id\", voiceId)\n      .eq(\"uid\", uid)\n      .single();\n\n    if (fetchError) {\n      throw new Error(`Не удалось найти голос: ${fetchError.message}`);\n    }\n\n    if (!voiceRecord || !voiceRecord.voice_id) {\n      throw new Error(\"Не найдено значение voice_id для этого голоса\");\n    }\n\n    // Отправляем вебхук с voice_id, названием голоса и UUID пользователя\n    const webhookResponse = await fetch(\n      \"https://rueleven.ru/webhook/932aee6f-b554-45e9-b232-f7829b0a1d06\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ \n          voice_id: voiceRecord.voice_id,\n          voice_name: voiceRecord.name || null,\n          uuid: uid,\n        }),\n      }\n    );\n\n    if (!webhookResponse.ok) {\n      const message = await webhookResponse.text();\n      throw new Error(\n        `Не удалось отправить вебхук: ${\n          message || webhookResponse.statusText\n        }`\n      );\n    }\n\n    // Удаляем запись из таблицы\n    const { error } = await supabaseAdmin\n      .from(\"voices\")\n      .delete()\n      .eq(\"id\", voiceId)\n      .eq(\"uid\", uid);\n\n    if (error) {\n      throw new Error(error.message);\n    }\n\n    return { success: true };\n  } catch (error) {\n    const message =\n      error instanceof Error ? error.message : \"Неизвестная ошибка\";\n    console.error(\"[DeleteVoice]\", message);\n    return { success: false, error: message };\n  }\n}\n\n\n"],"names":[],"mappings":";;;;;;;IA2BsB,cAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1747, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/voices/servers/UpdateVoice.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\nif (!supabaseUrl) {\r\n  throw new Error(\"NEXT_PUBLIC_SUPABASE_URL не задан\");\r\n}\r\n\r\nif (!supabaseServiceRoleKey) {\r\n  throw new Error(\"SUPABASE_SERVICE_ROLE_KEY не задан\");\r\n}\r\n\r\nconst supabaseAdmin = createClient(supabaseUrl, supabaseServiceRoleKey);\r\n\r\ninterface UpdateVoiceInput {\r\n  uid: string;\r\n  voiceId: string;\r\n  name: string;\r\n  description?: string | null;\r\n}\r\n\r\ninterface UpdateVoiceResult {\r\n  success: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport async function UpdateVoice({\r\n  uid,\r\n  voiceId,\r\n  name,\r\n  description,\r\n}: UpdateVoiceInput): Promise<UpdateVoiceResult> {\r\n  try {\r\n    if (!uid) {\r\n      return { success: false, error: \"Пользователь не найден\" };\r\n    }\r\n\r\n    if (!voiceId) {\r\n      return { success: false, error: \"ID голоса не указан\" };\r\n    }\r\n\r\n    if (!name || !name.trim()) {\r\n      return { success: false, error: \"Имя не может быть пустым\" };\r\n    }\r\n\r\n    const trimmedName = name.trim();\r\n    const trimmedDescription = description?.trim();\r\n\r\n    const { error } = await supabaseAdmin\r\n      .from(\"voices\")\r\n      .update({\r\n        name: trimmedName,\r\n        description: trimmedDescription || null,\r\n      })\r\n      .eq(\"id\", voiceId)\r\n      .eq(\"uid\", uid);\r\n\r\n    if (error) {\r\n      throw new Error(error.message);\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    const message =\r\n      error instanceof Error ? error.message : \"Неизвестная ошибка\";\r\n    console.error(\"[UpdateVoice]\", message);\r\n    return { success: false, error: message };\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;IA6BsB,cAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1762, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/voices/components/VoiceGrid.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  type MouseEvent as ReactMouseEvent,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { VoiceCard } from \"./VoiceCard\";\nimport { VoiceDeleteModal } from \"./VoiceDeleteModal\";\nimport { VoiceEditModal, type VoiceEditFormValues } from \"./VoiceEditModal\";\nimport { DeleteVoice } from \"../servers/DeleteVoice\";\nimport { UpdateVoice } from \"../servers/UpdateVoice\";\n\ninterface VoiceRow {\n  id?: string;\n  uid: string;\n  name: string;\n  url: string;\n  created_at?: string;\n  description?: string | null;\n}\n\ninterface VoiceGridProps {\n  voices: VoiceRow[];\n  currentUserId?: string | null;\n  onVoicesChanged?: () => void | Promise<void>;\n}\n\nexport function VoiceGrid({\n  voices,\n  currentUserId,\n  onVoicesChanged,\n}: VoiceGridProps) {\n  const [openMenuId, setOpenMenuId] = useState<string | null>(null);\n  const [hoveredCardId, setHoveredCardId] = useState<string | null>(null);\n  const [voiceToDelete, setVoiceToDelete] = useState<{\n    voice: VoiceRow;\n    key: string;\n  } | null>(null);\n  const [voiceToEdit, setVoiceToEdit] = useState<{\n    voice: VoiceRow;\n    key: string;\n  } | null>(null);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const menuRefs = useRef<Record<string, HTMLDivElement | null>>({});\n  const closeMenuTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (openMenuId) {\n        const menuElement = menuRefs.current[openMenuId];\n        if (menuElement && !menuElement.contains(event.target as Node)) {\n          setOpenMenuId(null);\n        }\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [openMenuId]);\n\n  useEffect(() => {\n    return () => {\n      if (closeMenuTimeoutRef.current) {\n        clearTimeout(closeMenuTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  if (voices.length === 0) {\n    return null;\n  }\n\n  const validVoices = voices.filter((voice) => voice.url && voice.name);\n\n  if (validVoices.length === 0) {\n    console.warn(\"[VoiceGrid] Нет валидных голосов для отображения\");\n    return null;\n  }\n\n  const handleMenuClick = (key: string, event: ReactMouseEvent) => {\n    event.stopPropagation();\n    setOpenMenuId((prev) => (prev === key ? null : key));\n  };\n\n  const handleDeleteClick = (voice: VoiceRow, key: string) => {\n    if (!currentUserId) {\n      alert(\"Не удалось определить пользователя\");\n      return;\n    }\n    if (!voice.id) {\n      alert(\"Не удалось определить идентификатор голоса\");\n      return;\n    }\n    setOpenMenuId(null);\n    setVoiceToDelete({ voice, key });\n    setIsDeleteModalOpen(true);\n  };\n\n  const handleEditClick = (voice: VoiceRow, key: string) => {\n    if (!currentUserId) {\n      alert(\"Не удалось определить пользователя\");\n      return;\n    }\n    if (!voice.id) {\n      alert(\"Не удалось определить идентификатор голоса\");\n      return;\n    }\n    setOpenMenuId(null);\n    setVoiceToEdit({ voice, key });\n    setIsEditModalOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!voiceToDelete || !currentUserId || !voiceToDelete.voice.id) {\n      return;\n    }\n\n    try {\n      setDeletingId(voiceToDelete.voice.id);\n      const result = await DeleteVoice({\n        uid: currentUserId,\n        voiceId: voiceToDelete.voice.id,\n      });\n\n      if (!result.success) {\n        throw new Error(result.error || \"Не удалось удалить голос\");\n      }\n\n      setIsDeleteModalOpen(false);\n      setVoiceToDelete(null);\n      await onVoicesChanged?.();\n    } catch (error) {\n      console.error(\"[voices] Ошибка удаления:\", error);\n      alert(\n        `Ошибка при удалении: ${\n          error instanceof Error ? error.message : \"Неизвестная ошибка\"\n        }`\n      );\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  const handleEditConfirm = async ({ name, description }: VoiceEditFormValues) => {\n    if (!voiceToEdit || !currentUserId || !voiceToEdit.voice.id) {\n      return;\n    }\n\n    try {\n      setEditingId(voiceToEdit.voice.id);\n      const result = await UpdateVoice({\n        uid: currentUserId,\n        voiceId: voiceToEdit.voice.id,\n        name,\n        description,\n      });\n\n      if (!result.success) {\n        throw new Error(result.error || \"Не удалось обновить голос\");\n      }\n\n      setIsEditModalOpen(false);\n      setVoiceToEdit(null);\n      await onVoicesChanged?.();\n    } catch (error) {\n      console.error(\"[voices] Ошибка редактирования:\", error);\n      alert(\n        `Ошибка при редактировании: ${\n          error instanceof Error ? error.message : \"Неизвестная ошибка\"\n        }`\n      );\n    } finally {\n      setEditingId(null);\n    }\n  };\n\n  const handleDeleteCancel = () => {\n    setIsDeleteModalOpen(false);\n    setVoiceToDelete(null);\n  };\n\n  const handleEditCancel = () => {\n    setIsEditModalOpen(false);\n    setVoiceToEdit(null);\n  };\n\n  return (\n    <div className=\"grid w-full gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n      {validVoices.map((voice) => {\n        const key = voice.id ?? `${voice.uid}-${voice.name}`;\n        const isHovered = hoveredCardId === key;\n        const showMenuButton = isHovered || openMenuId === key;\n        const isProcessing =\n          !!voice.id &&\n          (voice.id === deletingId || voice.id === editingId);\n\n        const menuSlot = (\n          <div className=\"absolute right-3 top-3\">\n            <button\n              type=\"button\"\n              onClick={(event) => handleMenuClick(key, event)}\n              className={`flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-gray-600 shadow-md transition-all duration-200 hover:bg-white hover:text-gray-900 ${\n                showMenuButton ? \"opacity-100\" : \"opacity-0\"\n              }`}\n              aria-label=\"Меню\"\n              disabled={isProcessing}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={2.5}\n                className=\"h-4 w-4\"\n              >\n                <circle cx=\"5\" cy=\"12\" r=\"1.5\" />\n                <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n                <circle cx=\"19\" cy=\"12\" r=\"1.5\" />\n              </svg>\n            </button>\n            {openMenuId === key && (\n              <div\n                ref={(el) => {\n                  menuRefs.current[key] = el;\n                }}\n                className=\"absolute right-0 top-10 z-50 min-w-[160px] rounded-lg border border-gray-200 bg-white shadow-lg\"\n              >\n                <button\n                  type=\"button\"\n                  onClick={() => handleEditClick(voice, key)}\n                  disabled={\n                    isProcessing ||\n                    !voice.id ||\n                    !currentUserId\n                  }\n                  className=\"w-full rounded-t-lg px-4 py-2 text-left text-sm text-gray-700 transition hover:bg-gray-50 disabled:opacity-50\"\n                >\n                  Редактировать\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => handleDeleteClick(voice, key)}\n                  disabled={\n                    isProcessing ||\n                    !voice.id ||\n                    !currentUserId\n                  }\n                  className=\"w-full rounded-b-lg px-4 py-2 text-left text-sm text-red-600 transition hover:bg-red-50 disabled:opacity-50\"\n                >\n                  Удалить\n                </button>\n              </div>\n            )}\n          </div>\n        );\n\n        return (\n          <VoiceCard\n            key={key}\n            name={voice.name}\n            url={voice.url}\n            description={voice.description}\n            menuSlot={menuSlot}\n            onMouseEnter={() => {\n              setHoveredCardId(key);\n              if (closeMenuTimeoutRef.current) {\n                clearTimeout(closeMenuTimeoutRef.current);\n                closeMenuTimeoutRef.current = null;\n              }\n            }}\n            onMouseLeave={() => {\n              setHoveredCardId((current) => (current === key ? null : current));\n              if (closeMenuTimeoutRef.current) {\n                clearTimeout(closeMenuTimeoutRef.current);\n              }\n              closeMenuTimeoutRef.current = setTimeout(() => {\n                if (openMenuId === key) {\n                  setOpenMenuId(null);\n                }\n              }, 500);\n            }}\n          />\n        );\n      })}\n      <VoiceDeleteModal\n        isOpen={isDeleteModalOpen}\n        onClose={handleDeleteCancel}\n        onConfirm={handleDeleteConfirm}\n        voiceName={voiceToDelete?.voice.name ?? \"\"}\n        isDeleting={\n          voiceToDelete?.voice.id !== undefined &&\n          voiceToDelete.voice.id === deletingId\n        }\n      />\n      <VoiceEditModal\n        isOpen={isEditModalOpen}\n        onClose={handleEditCancel}\n        onConfirm={handleEditConfirm}\n        currentName={voiceToEdit?.voice.name ?? \"\"}\n        currentDescription={voiceToEdit?.voice.description ?? \"\"}\n        isSaving={\n          voiceToEdit?.voice.id !== undefined &&\n          voiceToEdit.voice.id === editingId\n        }\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2100, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/VoicesEmptyState.tsx"],"sourcesContent":["\"use client\";\r\n\r\nexport function VoicesEmptyState() {\r\n  return (\r\n    <div className=\"group relative overflow-hidden rounded-3xl border-2 border-dashed border-purple-200 bg-gradient-to-br from-purple-50/50 to-pink-50/50 p-12 transition-all hover:border-purple-300 hover:shadow-lg\">\r\n      <div className=\"relative z-10 flex flex-col items-center text-center\">\r\n        <div className=\"mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-purple-100 transition-transform group-hover:scale-110\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-12 w-12 text-purple-600\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth={1.5}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <h3 className=\"mb-2 text-xl font-bold text-gray-900\">\r\n          Нет голосов\r\n        </h3>\r\n        <p className=\"max-w-sm text-sm text-gray-600\">\r\n          Создайте голос для использования в видео\r\n        </p>\r\n      </div>\r\n      <div className=\"absolute inset-0 opacity-5\">\r\n        <div className=\"absolute left-10 top-10 h-32 w-32 rounded-full bg-purple-400 blur-3xl\" />\r\n        <div className=\"absolute bottom-10 right-10 h-40 w-40 rounded-full bg-pink-400 blur-3xl\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,OAAM;4BACN,WAAU;4BACV,MAAK;4BACL,SAAQ;4BACR,QAAO;4BACP,aAAa;sCAEb,cAAA,6LAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,GAAE;;;;;;;;;;;;;;;;kCAIR,6LAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,6LAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;;0BAIhD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;KAjCgB"}},
    {"offset": {"line": 2204, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/VoicesSection.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\nimport { CosmoLoader } from \"@/components/ui/CosmoLoader\";\r\nimport { VoiceGrid } from \"@/app/voices/components/VoiceGrid\";\r\nimport { VoicesEmptyState } from \"./VoicesEmptyState\";\r\n\r\ninterface VoiceRow {\r\n  id?: string;\r\n  uid: string;\r\n  name: string;\r\n  url: string;\r\n  created_at?: string;\r\n  description?: string | null;\r\n}\r\n\r\nexport function VoicesSection() {\r\n  const router = useRouter();\r\n  const [isFetchingVoices, setIsFetchingVoices] = useState(true);\r\n  const [voices, setVoices] = useState<VoiceRow[]>([]);\r\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n\r\n  const fetchVoices = useCallback(async () => {\r\n    setIsFetchingVoices(true);\r\n\r\n    const {\r\n      data: { user },\r\n    } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n      router.push(\"/\");\r\n      setCurrentUserId(null);\r\n      setVoices([]);\r\n      setIsFetchingVoices(false);\r\n      return;\r\n    }\r\n\r\n    setCurrentUserId(user.id);\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"voices\")\r\n      .select(\"*\")\r\n      .eq(\"uid\", user.id)\r\n      .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) {\r\n      console.error(\"[voices] Ошибка загрузки голосов:\", error);\r\n      setVoices([]);\r\n    } else {\r\n      console.log(\"[voices] Загружено голосов:\", data?.length ?? 0, data);\r\n      const validVoices = (data ?? []).filter((voice) => voice.url && voice.name);\r\n      console.log(\"[voices] Валидных голосов:\", validVoices.length);\r\n      setVoices(validVoices);\r\n    }\r\n    setIsFetchingVoices(false);\r\n  }, [router]);\r\n\r\n  useEffect(() => {\r\n    fetchVoices();\r\n  }, [fetchVoices]);\r\n\r\n  return (\r\n    <section className=\"mb-12\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Мои голоса</h2>\r\n      </div>\r\n      {isFetchingVoices ? (\r\n        <div className=\"flex min-h-[300px] items-center justify-center rounded-3xl border border-gray-100 bg-gray-50\">\r\n          <CosmoLoader ariaLabel=\"Загружаем голоса...\" />\r\n        </div>\r\n      ) : voices.length === 0 ? (\r\n        <VoicesEmptyState />\r\n      ) : (\r\n        <VoiceGrid\r\n          voices={voices}\r\n          currentUserId={currentUserId}\r\n          onVoicesChanged={fetchVoices}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AACA;;;AARA;;;;;;;AAmBO,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAa,EAAE;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAgB;IAElE,MAAM,cAAc,IAAA,4KAAW;kDAAC;YAC9B,oBAAoB;YAEpB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;YAE/B,IAAI,CAAC,MAAM;gBACT,OAAO,IAAI,CAAC;gBACZ,iBAAiB;gBACjB,UAAU,EAAE;gBACZ,oBAAoB;gBACpB;YACF;YAEA,iBAAiB,KAAK,EAAE;YAExB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACnC,IAAI,CAAC,UACL,MAAM,CAAC,KACP,EAAE,CAAC,OAAO,KAAK,EAAE,EACjB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,qCAAqC;gBACnD,UAAU,EAAE;YACd,OAAO;gBACL,QAAQ,GAAG,CAAC,+BAA+B,MAAM,UAAU,GAAG;gBAC9D,MAAM,cAAc,CAAC,QAAQ,EAAE,EAAE,MAAM;0EAAC,CAAC,QAAU,MAAM,GAAG,IAAI,MAAM,IAAI;;gBAC1E,QAAQ,GAAG,CAAC,8BAA8B,YAAY,MAAM;gBAC5D,UAAU;YACZ;YACA,oBAAoB;QACtB;iDAAG;QAAC;KAAO;IAEX,IAAA,0KAAS;mCAAC;YACR;QACF;kCAAG;QAAC;KAAY;IAEhB,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;YAElD,iCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,kJAAW;oBAAC,WAAU;;;;;;;;;;uBAEvB,OAAO,MAAM,KAAK,kBACpB,6LAAC,yKAAgB;;;;qCAEjB,6LAAC,yJAAS;gBACR,QAAQ;gBACR,eAAe;gBACf,iBAAiB;;;;;;;;;;;;AAK3B;GAjEgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 2334, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/VideosEmptyState.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport function VideosEmptyState() {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"group relative overflow-hidden rounded-3xl border-2 border-dashed border-green-200 bg-gradient-to-br from-green-50/50 to-emerald-50/50 p-12 transition-all hover:border-green-300 hover:shadow-lg\">\r\n      <div className=\"relative z-10 flex flex-col items-center text-center\">\r\n        <div className=\"mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-green-100 transition-transform group-hover:scale-110\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className=\"h-12 w-12 text-green-600\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth={1.5}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <h3 className=\"mb-2 text-xl font-bold text-gray-900\">\r\n          Создайте свое первое видео\r\n        </h3>\r\n        <p className=\"mb-6 max-w-sm text-sm text-gray-600\">\r\n          Используйте аватары и голоса для создания профессиональных видео с помощью нашего редактора\r\n        </p>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => router.push(\"/material/editor\")}\r\n          className=\"rounded-xl bg-green-600 px-6 py-3 text-sm font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg active:scale-95\"\r\n        >\r\n          Создать видео\r\n        </button>\r\n      </div>\r\n      <div className=\"absolute inset-0 opacity-5\">\r\n        <div className=\"absolute left-10 top-10 h-32 w-32 rounded-full bg-green-400 blur-3xl\" />\r\n        <div className=\"absolute bottom-10 right-10 h-40 w-40 rounded-full bg-emerald-400 blur-3xl\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIO,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IAExB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,OAAM;4BACN,WAAU;4BACV,MAAK;4BACL,SAAQ;4BACR,QAAO;4BACP,aAAa;sCAEb,cAAA,6LAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,GAAE;;;;;;;;;;;;;;;;kCAIR,6LAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,6LAAC;wBAAE,WAAU;kCAAsC;;;;;;kCAGnD,6LAAC;wBACC,MAAK;wBACL,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;kCACX;;;;;;;;;;;;0BAIH,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;GA1CgB;;QACC,kJAAS;;;KADV"}},
    {"offset": {"line": 2458, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/VideosSection.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { VideosEmptyState } from \"./VideosEmptyState\";\r\n\r\nexport function VideosSection() {\r\n  return (\r\n    <section className=\"mb-12\">\r\n      <div className=\"mb-6 flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Мои видео</h2>\r\n      </div>\r\n      <VideosEmptyState />\r\n    </section>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAEnD,6LAAC,yKAAgB;;;;;;;;;;;AAGvB;KATgB"}},
    {"offset": {"line": 2508, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/components/Dashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { AvatarsSection } from \"./AvatarsSection\";\r\nimport { VoicesSection } from \"./VoicesSection\";\r\nimport { VideosSection } from \"./VideosSection\";\r\n\r\nexport function Dashboard() {\r\n  return (\r\n    <div className=\"mx-auto w-full max-w-[1350px] px-6 py-12\">\r\n      <AvatarsSection />\r\n      <VoicesSection />\r\n      <VideosSection />\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,qKAAc;;;;;0BACf,6LAAC,mKAAa;;;;;0BACd,6LAAC,mKAAa;;;;;;;;;;;AAGpB;KARgB"}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"sources":["file:///G:/apps/Dev/avatars_new/front/app/%28main%29/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport { Header } from \"@/components/ui/Header\";\nimport { Dashboard } from \"./components/Dashboard\";\nimport { CosmoLoader } from \"@/components/ui/CosmoLoader\";\n\nexport const dynamic = 'force-dynamic';\n\nexport default function Home() {\n  const router = useRouter();\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n      if (!user) {\n        router.push(\"/login\");\n      } else {\n        setIsCheckingAuth(false);\n      }\n    };\n\n    checkAuth();\n  }, [router]);\n\n  if (isCheckingAuth) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-white\">\n        <CosmoLoader ariaLabel=\"Проверка авторизации...\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <Header />\n      <Dashboard />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASO,MAAM,UAAU;AAER,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IAErD,IAAA,0KAAS;0BAAC;YACR,MAAM;4CAAY;oBAChB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;oBAC/B,IAAI,CAAC,MAAM;wBACT,OAAO,IAAI,CAAC;oBACd,OAAO;wBACL,kBAAkB;oBACpB;gBACF;;YAEA;QACF;yBAAG;QAAC;KAAO;IAEX,IAAI,gBAAgB;QAClB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,kJAAW;gBAAC,WAAU;;;;;;;;;;;IAG7B;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,wIAAM;;;;;0BACP,6LAAC,2JAAS;;;;;;;;;;;AAGhB;GAjCwB;;QACP,kJAAS;;;KADF"}}]
}